<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>à¹€à¸à¸¡à¸™à¹‰à¸³à¹€à¸•à¹‰à¸²à¸›à¸¹à¸›à¸¥à¸² | GoldoraX</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Prompt:wght@400;600;700&display=swap');
body {Â 
Â  Â  font-family: 'Prompt', sans-serif;Â 
Â  Â  background: linear-gradient(180deg, #020024 0%, #000045 35%, #080064 100%);Â 
Â  Â  color: #fff;Â 
Â  Â  text-align: center;Â 
Â  Â  min-height: 100vh;Â 
Â  Â  margin: 0;Â 
Â  Â  padding-top: 20px;
Â  Â  display: flex;
Â  Â  flex-direction: column;
Â  Â  align-items: center;
}
h1 {
Â  Â  color: #00ffff;Â 
Â  Â  text-shadow: 0 0 15px rgba(0, 255, 255, 0.8), 0 0 5px rgba(255, 255, 255, 0.5);
Â  Â  margin-bottom: 10px;
Â  Â  font-size: 2.8rem;
}
header {Â 
Â  Â  width: 90%;
Â  Â  max-width: 600px;
Â  Â  margin-bottom: 10px;
Â  Â  background: rgba(17, 0, 92, 0.5);Â 
Â  Â  backdrop-filter: blur(5px);
Â  Â  padding: 15px;
Â  Â  border-radius: 15px;
Â  Â  border: 1px solid rgba(255, 255, 255, 0.1);
Â  Â  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.7);
}
.user-info {
Â  Â  display: flex;
Â  Â  justify-content: space-between;
Â  Â  align-items: center;
Â  Â  font-size: 1.1rem;
Â  Â  padding: 5px 0;
}
.username-display { color: #ffd700; font-weight: bold; }
.balance-display { color: #76ff03; font-weight: bold; font-size: 1.5rem; }

.action-buttons {
Â  Â  display: flex;
Â  Â  justify-content: space-around;
Â  Â  width: 90%;
Â  Â  max-width: 500px;
Â  Â  margin: 10px auto 20px auto;
}
.action-btn {
Â  Â  border: none;
Â  Â  padding: 10px 20px;
Â  Â  font-size: 1rem;
Â  Â  border-radius: 25px;
Â  Â  font-weight: bold;
Â  Â  cursor: pointer;
Â  Â  transition: all 0.3s;
Â  Â  width: 45%;
Â  Â  transform: translateY(0);
}
.deposit-btn {
Â  Â  background: linear-gradient(45deg, #76ff03, #388e3c);
Â  Â  color: #000;
Â  Â  box-shadow: 0 4px 0 #1b5e20, 0 0 15px #76ff03;
}
.deposit-btn:hover {
Â  Â  background: linear-gradient(45deg, #aeff03, #66bb6a);
Â  Â  transform: translateY(-4px);
Â  Â  box-shadow: 0 4px 0 #1b5e20, 0 0 25px #76ff03;
}
.withdraw-btn {
Â  Â  background: linear-gradient(45deg, #ff5757, #c62828);
Â  Â  color: white;
Â  Â  box-shadow: 0 4px 0 #8c0000, 0 0 15px #ff5757;
}
.withdraw-btn:hover {
Â  Â  background: linear-gradient(45deg, #ff8a80, #ef5350);
Â  Â  transform: translateY(-4px);
Â  Â  box-shadow: 0 4px 0 #8c0000, 0 0 25px #ff5757;
}

.animals {
Â  Â  display: grid;
Â  Â  grid-template-columns: repeat(3, 1fr);
Â  Â  gap: 15px;
Â  Â  width: 90%;
Â  Â  max-width: 500px;
Â  Â  margin: 20px auto;
}
.animal-btn {
Â  Â  padding: 18px;
Â  Â  background: linear-gradient(135deg, #1c0082, #0b0047);Â 
Â  Â  border: none;
Â  Â  border-radius: 15px;
Â  Â  cursor: pointer;
Â  Â  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
Â  Â  font-size: 3rem;
Â  Â  line-height: 1;
Â  Â  transform: translateY(-2px);Â 
Â  Â  box-shadow: 0 5px 0 0 #08003d, inset 0 0 10px rgba(255,255,255,0.1), 0 10px 20px rgba(0,0,0,0.9);
}
.animal-btn span {
Â  Â  display: block;
Â  Â  font-size: 1.1rem;Â 
Â  Â  color: #ff99ff;
Â  Â  margin-top: 8px;
Â  Â  font-weight: 600;
}
.animal-btn:hover {
Â  Â  transform: translateY(-8px) scale(1.08);
Â  Â  box-shadow: 0 4px 0 #05002b, 0 18px 30px rgba(0,0,0,1.2), 0 0 35px #00ffff;
}
.animal-btn.selected {
Â  Â  background: linear-gradient(135deg, gold, #ffec85);
Â  Â  border-color: transparent;
Â  Â  transform: translateY(-4px);Â 
Â  Â  box-shadow: 0 2px 0 #b8860b, 0 0 40px gold, 0 0 70px rgba(255, 215, 0, 0.7);
}

.controls {
Â  Â  background: rgba(11,0,71,0.6);
Â  Â  backdrop-filter: blur(5px);
Â  Â  padding: 25px;
Â  Â  border-radius: 20px;
Â  Â  box-shadow: 0 0 20px rgba(0,0,0,0.8), 0 0 5px #ff99ff;
Â  Â  width: 90%;
Â  Â  max-width: 600px;
Â  Â  margin-bottom: 20px;
Â  Â  border: 1px solid rgba(255,255,255,0.1);
}
.dice-area { font-size: 4rem; margin: 15px 0; min-height: 60px; font-weight: bold; color: #00ffff; text-shadow: 0 0 10px #00ffff; }
.result-area { min-height: 30px; margin-bottom: 15px; font-size: 1.6rem; font-weight: bold; color: #76ff03; text-shadow: 0 0 8px #76ff03; }

.chip-buttons { display: flex; justify-content: center; gap: 8px; margin-bottom: 15px; flex-wrap: wrap; }
.chip-btn { background: linear-gradient(45deg,#ffd700,#ffec85); color:#1a0033; border:2px solid #b8860b; border-radius:50%; width:50px; height:50px; display:flex; align-items:center; justify-content:center; font-size:0.9rem; font-weight:700; cursor:pointer; transition: all 0.2s; box-shadow:0 3px 0 #b8860b,0 0 10px gold; }
.chip-btn:hover { transform: translateY(-2px); box-shadow:0 4px 0 #b8860b,0 0 15px gold; }

input[type="number"] { width:150px; padding:10px; border-radius:20px; border:2px solid gold; background:rgba(255,255,255,0.1); color:white; font-size:16px; text-align:center; margin-right:10px; box-shadow: inset 0 0 10px rgba(0,0,0,0.5); }
#roll { background: linear-gradient(45deg,gold,#ffec85); border:none; padding:12px 30px; font-size:1.2rem; border-radius:25px; font-weight:bold; color:#1a0033; cursor:pointer; transition: all 0.2s cubic-bezier(0.25,0.46,0.45,0.94); box-shadow:0 4px 0 #b8860b,0 0 20px gold; transform: translateY(-2px); }
#roll:hover { box-shadow:0 4px 0 #b8860b,0 0 30px gold; transform: translateY(-5px) scale(1.05); }
#roll:disabled { opacity:0.5; cursor:not-allowed; transform:translateY(0); box-shadow:0 0 10px rgba(0,0,0,0.5); }

.modal { display:none; position:fixed; z-index:1000; left:0; top:0; width:100%; height:100%; overflow:auto; background-color:rgba(0,0,0,0.7); padding-top:150px; }
.modal-content { background-color:#1a0066; margin:5% auto; padding:30px; border:3px solid #00ffff; width:80%; max-width:350px; border-radius:15px; box-shadow:0 0 25px #00ffff; color:white; text-align:center; }
.modal-content button { margin-top:20px; background:#00ffff; color:#1a0033; font-weight:bold; border:none; padding:10px 20px; border-radius:10px; cursor:pointer; box-shadow:0 0 10px #00ffff; }
.modal-content button:hover { box-shadow:0 0 20px #00ffff; }
</style>
</head>
<body>

<div id="messageModal" class="modal">
Â  <div class="modal-content">
Â  Â  <p id="modalMessage"></p>
Â  Â  <button onclick="closeModal()">à¸•à¸à¸¥à¸‡</button>
Â  </div>
</div>

<h1>à¹€à¸à¸¡à¸™à¹‰à¸³à¹€à¸•à¹‰à¸²à¸›à¸¹à¸›à¸¥à¸²</h1>

<header>
Â  <div class="user-info">
Â  Â  <div>à¸œà¸¹à¹‰à¹€à¸¥à¹ˆà¸™: <span id="usernameDisplay" class="username-display">...</span></div>
Â  Â  <div>à¸¢à¸­à¸”à¹€à¸‡à¸´à¸™: <span id="balanceDisplay" class="balance-display">0 ğŸ’°</span></div>
Â  </div>
</header>

<div class="action-buttons">
Â  <button class="action-btn deposit-btn" onclick="openSupport(['https://lin.ee/Mm1caQx'])">ğŸ’° à¸à¸²à¸à¹€à¸‡à¸´à¸™</button>
Â  <button class="action-btn withdraw-btn" onclick="openSupport(['https://lin.ee/Mm1caQx'])">ğŸ’³ à¸–à¸­à¸™à¹€à¸‡à¸´à¸™</button>
</div>

<div class="animals">
Â  <div class="animal-btn" data-animal="à¸›à¸¥à¸²">ğŸŸ <span>à¸›à¸¥à¸²</span></div>
Â  <div class="animal-btn" data-animal="à¸à¸¸à¹‰à¸‡">ğŸ¦ <span>à¸à¸¸à¹‰à¸‡</span></div>
Â  <div class="animal-btn" data-animal="à¸™à¹‰à¸³à¹€à¸•à¹‰à¸²">ğŸˆ <span>à¸™à¹‰à¸³à¹€à¸•à¹‰à¸²</span></div>
Â  <div class="animal-btn" data-animal="à¹€à¸ªà¸·à¸­">ğŸ¯ <span>à¹€à¸ªà¸·à¸­</span></div>
Â  <div class="animal-btn" data-animal="à¸›à¸¹">ğŸ¦€ <span>à¸›à¸¹</span></div>
Â  <div class="animal-btn" data-animal="à¹„à¸à¹ˆ">ğŸ“ <span>à¹„à¸à¹ˆ</span></div>
</div>

<div class="controls">
Â  <div class="dice-area" id="diceArea">...</div>
Â  <div class="result-area" id="result">à¸à¸£à¹‰à¸­à¸¡à¹€à¸”à¸´à¸¡à¸à¸±à¸™!</div>
Â  <div class="chip-buttons">
Â  Â  <button class="chip-btn" data-amount="50">50</button>
Â  Â  <button class="chip-btn" data-amount="100">100</button>
Â  Â  <button class="chip-btn" data-amount="200">200</button>
Â  Â  <button class="chip-btn" data-amount="500">500</button>
Â  Â  <button class="chip-btn" data-amount="1000">1000</button>
Â  </div>
Â  <div style="display:flex; justify-content:center; align-items:center;">
Â  Â  <input type="number" id="betAmount" placeholder="à¸ˆà¸³à¸™à¸§à¸™à¹€à¸‡à¸´à¸™à¹€à¸”à¸´à¸¡à¸à¸±à¸™" value="100" min="10">
Â  Â  <button id="roll">à¸«à¸¡à¸¸à¸™!</button>
Â  </div>
</div>

<a href="index_Version8.html" style="margin-top:20px; color:#ccc; text-decoration:none;">ğŸ  à¸à¸¥à¸±à¸šà¸«à¸™à¹‰à¸²à¸«à¸¥à¸±à¸</a>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
import { getFirestore, doc, getDoc, updateDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

const firebaseConfig = {
Â  apiKey: "AIzaSyACTSU6LYObSv5gEAfKJt4Yr4LaCCAkQvw",
Â  authDomain: "goldorax-game.firebaseapp.com",
Â  projectId: "goldorax-game",
Â  storageBucket: "goldorax-game.firebasestorage.app",
Â  messagingSenderId: "601999451419",
Â  appId: "1:601999451419:web:f0782a8437b493eb8f5b"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

let currentUsername = null;
let balance = 0;
const animals = ['à¸›à¸¥à¸²','à¸à¸¸à¹‰à¸‡','à¸™à¹‰à¸³à¹€à¸•à¹‰à¸²','à¹€à¸ªà¸·à¸­','à¸›à¸¹','à¹„à¸à¹ˆ'];
const emojis = ['ğŸŸ','ğŸ¦','ğŸˆ','ğŸ¯','ğŸ¦€','ğŸ“'];
const selected = new Set();

const balanceDisplay = document.getElementById('balanceDisplay');
const usernameDisplay = document.getElementById('usernameDisplay');
const betInput = document.getElementById('betAmount');
const diceArea = document.getElementById('diceArea');
const result = document.getElementById('result');
const rollButton = document.getElementById('roll');

const messageModal = document.getElementById('messageModal');
const modalMessage = document.getElementById('modalMessage');

function showModal(message){ modalMessage.textContent = message; messageModal.style.display = 'block'; }
window.closeModal = function(){ messageModal.style.display = 'none'; }

function openSupport(urls){
Â  urls.forEach(url=>{ window.open(url,'_blank','width=500,height=700'); });
}

document.addEventListener('DOMContentLoaded', async ()=>{
Â  currentUsername = sessionStorage.getItem('currentUsername');
Â  if(!currentUsername){
Â  Â  showModal('à¸à¸£à¸¸à¸“à¸²à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šà¸à¹ˆà¸­à¸™à¹€à¸¥à¹ˆà¸™à¹€à¸à¸¡');
Â  Â  setTimeout(()=>window.location.href='login_Version4.html',2000);
Â  Â  return;
Â  }
Â  usernameDisplay.textContent = currentUsername;
Â  await loadBalance();

Â  document.querySelectorAll('.animal-btn').forEach(btn=>{
Â  Â  btn.addEventListener('click', ()=>{
Â  Â  Â  const animal = btn.getAttribute('data-animal');
Â  Â  Â  if(selected.has(animal)){ selected.delete(animal); btn.classList.remove('selected'); }
Â  Â  Â  else { if(selected.size<3){ selected.add(animal); btn.classList.add('selected'); } else { showModal('à¹€à¸¥à¸·à¸­à¸à¹„à¸”à¹‰à¸ªà¸¹à¸‡à¸ªà¸¸à¸” 3 à¸•à¸±à¸§à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™!'); } }
Â  Â  });
Â  });

Â  document.querySelectorAll('.chip-btn').forEach(chip=>{
Â  Â  chip.addEventListener('click', ()=>{ betInput.value = chip.getAttribute('data-amount'); });
Â  });
});

async function loadBalance(){
Â  if(!currentUsername) return;
Â  try{
Â  Â  const userRef = doc(db,'players',currentUsername);
Â  Â  const docSnap = await getDoc(userRef);
Â  Â  balance = docSnap.exists()? docSnap.data().balance||0 : 0;
Â  Â  balanceDisplay.textContent = balance.toLocaleString()+' ğŸ’°';
Â  }catch(e){ console.error(e); showModal('à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¢à¸­à¸”à¹€à¸‡à¸´à¸™!'); }
}

async function saveBalance(newBalance){
Â  if(!currentUsername) return;
Â  try{
Â  Â  const userRef = doc(db,'players',currentUsername);
Â  Â  await updateDoc(userRef,{ balance: newBalance });
Â  Â  balance = newBalance;
Â  Â  balanceDisplay.textContent = balance.toLocaleString()+' ğŸ’°';
Â  }catch(e){ console.error(e); showModal('à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸šà¸±à¸™à¸—à¸¶à¸à¸¢à¸­à¸”à¹€à¸‡à¸´à¸™!'); await loadBalance(); }
}

rollButton.addEventListener('click', async ()=>{
Â  const betAmount = parseInt(betInput.value);
Â  if(isNaN(betAmount)||betAmount<=0){ showModal('à¸à¸£à¸¸à¸“à¸²à¹ƒà¸ªà¹ˆà¸ˆà¸³à¸™à¸§à¸™à¹€à¸‡à¸´à¸™à¹€à¸”à¸´à¸¡à¸à¸±à¸™à¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡!'); return; }
Â  if(balance<betAmount){ showModal('à¸¢à¸­à¸”à¹€à¸‡à¸´à¸™à¹„à¸¡à¹ˆà¹€à¸à¸µà¸¢à¸‡à¸à¸­! à¸à¸£à¸¸à¸“à¸²à¸à¸²à¸à¹€à¸‡à¸´à¸™à¸œà¹ˆà¸²à¸™ LINE OA/WhatsApp'); return; }
Â  if(selected.size===0){ showModal('à¸à¸£à¸¸à¸“à¸²à¹€à¸¥à¸·à¸­à¸à¸ªà¸±à¸•à¸§à¹Œà¸à¹ˆà¸­à¸™!'); return; }

Â  const newBalanceAfterBet = balance - betAmount;
Â  await saveBalance(newBalanceAfterBet);
Â  rollButton.disabled = true;
Â  diceArea.textContent = 'ğŸ² à¸«à¸¡à¸¸à¸™...';
Â  result.textContent = 'à¸£à¸­à¸¥à¸¸à¹‰à¸™à¸œà¸¥...';

Â  setTimeout(async()=>{
Â  Â  const diceResults = Array.from({length:3}, ()=>animals[Math.floor(Math.random()*animals.length)]);
Â  Â  diceArea.textContent = diceResults.map(a=>emojis[animals.indexOf(a)]).join(' ');
Â  Â  let hitCount = 0; diceResults.forEach(a=>{ if(selected.has(a)) hitCount++; });
Â  Â  let finalBalance = newBalanceAfterBet;
Â  Â  let winAmount = 0;

Â  Â  if(hitCount>0){
Â  Â  Â  if(hitCount===1) winAmount=betAmount*1;
Â  Â  Â  else if(hitCount===2) winAmount=betAmount*2;
Â  Â  Â  else winAmount=betAmount*3;
Â  Â  Â  finalBalance += betAmount + winAmount;
Â  Â  Â  result.textContent = `ğŸ‰ à¸„à¸¸à¸“à¸Šà¸™à¸°! à¸–à¸¹à¸ ${hitCount} à¸•à¸±à¸§ (+${winAmount.toLocaleString()} ğŸ’°)`;
Â  Â  } else { result.textContent = `ğŸ˜­ à¸„à¸¸à¸“à¹à¸à¹‰! à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡`; }

Â  Â  await saveBalance(finalBalance);
Â  Â  selected.clear();
Â  Â  document.querySelectorAll('.animal-btn').forEach(btn=>btn.classList.remove('selected'));
Â  Â  rollButton.disabled = false;
Â  },1500);
});
</script>

</body>
</html>
